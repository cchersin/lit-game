{"version":3,"file":"starting-page.js","sourceRoot":"","sources":["../../src/starting-page.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css } from 'lit';\nimport { customElement } from 'lit/decorators.js';\n\nimport { Router } from '@vaadin/router';\n\nimport { Game } from './game.js';\nimport { StoreService } from './store-service.js';\n\n@customElement('starting-page')\nexport class StartingPage extends LitElement {\n  currentGame = new Game('');\n  \n  static styles = css`\n  main {\n    background-color: red;\n    height: 100%;\n  }\n\n  .information {\n    text-align: center;\n    font-size: 16px;\n    font-weight: bold;\n    line-height: 1;\n  }\n\n  .action-button {\n    background-color: red;\n    font-size: 18px;\n    border-radius: 20px;\n    z-index: 1000;\n    position: relative;\n    border: none;\n    padding: 10px;\n    padding-left: 18px;\n    padding-right: 18px;\n    font-weight: bold;\n    margin: auto;\n    border: 2px solid black;\n  }\n\n  .container-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    align-content: center;\n    flex-wrap: wrap;\n    max-width: 400px;\n    margin: auto;\n  }\n\n  .information-container {\n    margin-top: 80px;\n    margin-bottom: 20px;\n  }\n\n  `;\n\n  constructor() {\n    super();\n    this.loadGame();\n  }\n\n  handleNewGame(event: any) {\n    const gameName = new Date().toString();\n \n    const game = new Game(gameName);\n\n    game.init(localStorage.userName);\n  \n    StoreService.saveGame(game);\n  }\n\n  handleJoin(event: any) {\n    this.currentGame.join(localStorage.userName);\n    StoreService.saveGame(this.currentGame); \n  }\n\n  handleStartGame(event: any) {\n    this.currentGame.start();\n    StoreService.saveGame(this.currentGame);\n  }\n\n\n  loadGame() {\n    StoreService.onGameUpdate((game) => {\n        this.currentGame = game;\n\n        if(this.currentGame.status === 'started' && this.hasRole()) {\n          Router.go('/game');\n        } \n        this.requestUpdate();\n    });\n  }\n\n  findMasterName() {\n    return this.currentGame.findMasterName();\n  }\n\n  findPlayers() {\n    return this.currentGame.findPlayers();\n  } \n\n  isMaster() {\n    return this.currentGame.isMaster(localStorage.userName);\n  }\n\n  isPlayer() {\n    return this.currentGame.isPlayer(localStorage.userName);\n  }\n\n  hasRole() {\n    return this.currentGame.getPlayer(localStorage.userName);\n  }\n\n  getRole() {\n    return this.currentGame.getRole(localStorage.userName);\n  }\n\n\n  render() {\n    return html`\n      <main class=\"game\">\n        <span>User: ${localStorage.userName}(${this.getRole()}) - ${this.currentGame.status}</span>\n        <div class=\"information-container\">\n         <p class=\"information\">${this.findMasterName() !== '' ? this.findMasterName() + ' has started the game' : ''}</p>\n         ${this.findPlayers().map(player => html`\n            <p class=\"information\">\n              ${player.name} has joined the game\n            </p>\n          `)}\n        </div>\n        <div class=\"container-button\">\n         ${this.currentGame.status === 'completed' ? html`<button class=\"action-button\" @click=\"${this.handleNewGame}\">New game</button>` : html``}\n         ${this.isMaster() && this.currentGame.status === 'pending' ? html`<button class=\"action-button\" @click=\"${this.handleStartGame}\">Start game</button>` : html``}\n         ${!this.hasRole() && this.currentGame.status === 'pending' ? html`<button class=\"action-button\" @click=\"${this.handleJoin}\">Join</button>` : html``}\n         </div>\n      </main>\n    `;\n  }\n}\n"]}