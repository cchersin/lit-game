{"version":3,"file":"store-service.js","sourceRoot":"","sources":["../../src/store-service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,MAAM,eAAe,CAAC;AACnC,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,UAAU,EAAE,MAAM,oBAAoB,CAAC;AAC7D,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;AAIjC,MAAM,OAAO,YAAY;IACxB,MAAM,CAAC,QAAQ,CAAC,IAAU;QACzB,MAAM,MAAM,GAAG,GAAG,CAAC,EAAE,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;QAC7C,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAE9B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACzB,CAAC;IAED,MAAM,CAAC,YAAY,CAAC,EAAoB;QACvC,MAAM,MAAM,GAAG,GAAG,CAAC,EAAE,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;QAC7C,UAAU,CAAC,MAAM,EAAE,CAAC,WAAW,EAAE,EAAE;YAClC,IAAI,WAAW,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC1B,MAAM,IAAI,GAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC;gBAC9C,EAAE,CAAC,IAAI,CAAC,CAAC;YACV,CAAC;QACF,CAAC,CAAC,CAAC;IACP,CAAC;CACD","sourcesContent":["import { db } from './firebase.js';\nimport { setDoc, doc, onSnapshot } from 'firebase/firestore';\nimport { Game } from './game.js';\n\ntype CallbackFunction = (game: Game) => void;\n\nexport class StoreService {\n\tstatic saveGame(game: Game) {\n\t\tconst docRef = doc(db, 'global', 'currentGame');\n    \tsetDoc(docRef, game.toJSON());\n\n    \tconsole.log('saved');\n\t}\n\n\tstatic onGameUpdate(cb: CallbackFunction) {\n\t\tconst docRef = doc(db, 'global', 'currentGame');\n    \tonSnapshot(docRef, (docSnapshot) => {\n    \t\tif (docSnapshot.exists()) {\n    \t\t\tconst game =Game.fromJSON(docSnapshot.data());\n    \t\t\tcb(game);\n    \t\t}\n    \t});\n\t}\n}\n"]}